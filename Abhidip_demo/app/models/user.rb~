class User < ActiveRecord::Base
  has_many :posts,:dependent => :destroy
  attr_accessible :user_name, :email, :roll, :age, :dept,:contact_no
  validates  :email, :presence => true
  
  validates :email,:uniqueness => true
  validates_format_of :email, :with => /\A[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+.[A-Za-z]+\z/i
  before_create do |user|
  user.user_name = user.user_name.capitalize
  end
  before_update do |user|
  user.user_name = user.user_name.capitalize
  end
  
  before_create do |user|
  if user.user_name.nil?
    if !(user.email.blank?)
       user.user_name<=user.email
       redirect_to users_path
    end
  end
 end
  
    
end
